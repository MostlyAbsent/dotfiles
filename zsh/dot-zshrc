# History setup
HISTFILE=$ZSH_CACHE/history
HISTDUP=erase
setopt SHARE_HISTORY
setopt APPEND_HISTORY
setopt EXTENDED_HISTORY

EDITOR=nvim

# Disable Suspend and unfortunately backgrounding jobs
set +m
#
# Find and set branch name var if in git repository.
function git_branch_name()
{
  branch=$(git symbolic-ref HEAD 2> /dev/null | awk 'BEGIN{FS="/"} {print $NF}')
  if [[ $branch == "" ]];
  then
    :
  else
    echo '- '$branch
  fi
}

# Enable substitution in the prompt.
setopt prompt_subst

# Config for prompt. PS1 synonym.
PROMPT='%2/ $(git_branch_name) > '
# Colorize prompt
PROMPT=%F{cyan}$PROMPT%f

# Case Insensitive completion
autoload -Uz compinit && compinit
zstyle ':completion:*' matcher-list 'm:{a-z}={A-Za-z}'

# Load supplementary config files
for file in $XDG_CONFIG_HOME/zsh/zshrc.d/*; do
  source "$file"
done
